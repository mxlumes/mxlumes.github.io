<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="M-X Lumes Professional 3:1 Epoxy Resin Systems - Crystal Clear Studio Grade">
  <title>M-X Lumes | Professional Epoxy Resin Systems</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <style>
    :root {
      --accent-grad: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
      --accent-solid: #6366f1;
      --bg: #000000;
      --glass: rgba(15, 15, 15, 0.9);
      --border: rgba(255, 255, 255, 0.1);
      --text: #ffffff;
      --text-dim: #a8b2d1;
      --success: #10b981;
      --warning: #fbbf24;
      --danger: #ef4444;
      --gradient-gold: linear-gradient(135deg, #ffd700, #ffed4a);
    }

    * { 
      margin: 0; padding: 0; box-sizing: border-box; 
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
    }
    
    html { scroll-behavior: smooth; scroll-padding-top: 90px; overflow-x: hidden; }
    body { background: var(--bg); color: var(--text); line-height: 1.7; }

    /* ADVANCED CURSOR SYSTEM */
    @media (pointer: fine) { * { cursor: none !important; } }
    .cursor-system { position: fixed; z-index: 9999; pointer-events: none; }
    .cursor-dot { 
      width: 14px; height: 14px; background: var(--accent-solid); 
      border-radius: 50%; box-shadow: 0 0 25px var(--accent-solid); 
      transition: transform 0.15s cubic-bezier(0.25, 1, 0.5, 1);
    }
    .cursor-ring { 
      width: 60px; height: 60px; border: 2px solid rgba(99,102,241,0.4); 
      border-radius: 50%; transform: scale(0); opacity: 0.6;
      transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
    }
    .cursor-ring.hover { transform: scale(1.3); opacity: 1; }

    /* MULTI-LAYER BACKGROUND */
    .bg-system { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -2; }
    .bg-primary { 
      background: var(--bg) url('hero-resin.webp') center/cover fixed; 
      filter: brightness(0.65) contrast(1.15) saturate(1.2);
    }
    .bg-gradient-overlay { 
      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 30%, rgba(0,0,0,0.95) 70%, var(--bg) 100%);
    }
    .bg-particle { 
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
      background-image: radial-gradient(2px 2px at 20px 30px, #6366f1, transparent),
                        radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.1), transparent),
                        radial-gradient(1px 1px at 90px 40px, #7C3AED, transparent);
      background-size: 100px 100px; animation: particleFloat 20s ease-in-out infinite;
    }
    @keyframes particleFloat { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(180deg); } }

    /* NAVIGATION 3.0 */
    .navbar { 
      position: fixed; top: 0; width: 100%; padding: 1.2rem 0; 
      backdrop-filter: blur(40px) saturate(180%); background: rgba(0,0,0,0.92); 
      border-bottom: 1px solid var(--border); z-index: 10000; transition: all 0.4s ease;
    }
    .nav-container { 
      max-width: 1600px; margin: 0 auto; display: flex; justify-content: space-between; 
      align-items: center; padding: 0 3rem; 
    }
    .logo { 
      font-size: clamp(1.4rem, 2.5vw, 1.8rem); font-weight: 900; 
      background: var(--gradient-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      letter-spacing: -0.5px; text-decoration: none; position: relative;
    }
    .logo::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; 
      background: var(--gradient-gold); transition: width 0.4s ease; }
    .logo:hover::after { width: 100%; }
    
    .nav-menu { display: flex; gap: 3rem; list-style: none; align-items: center; }
    .nav-link { 
      color: var(--text-dim); text-decoration: none; font-weight: 700; font-size: 0.95rem; 
      text-transform: uppercase; letter-spacing: 1px; position: relative; transition: all 0.4s ease;
    }
    .nav-link::before { content: ''; position: absolute; top: -10px; left: 50%; 
      width: 4px; height: 4px; background: var(--accent-solid); border-radius: 50%; 
      transform: translateX(-50%) scale(0); transition: all 0.4s ease;
    }
    .nav-link:hover, .nav-link.active { color: #fff; }
    .nav-link:hover::before { transform: translateX(-50%) scale(1); }

    /* HERO 2.0 */
    .hero { min-height: 100vh; display: flex; align-items: center; justify-content: center; 
      position: relative; overflow: hidden; 
    }
    .hero-content { text-align: center; max-width: 900px; padding: 0 2rem; z-index: 2; }
    .hero-main-title { 
      font-size: clamp(4rem, 10vw, 7.5rem); font-weight: 900; line-height: 1; 
      background: linear-gradient(135deg, #fff 0%, var(--accent-solid) 40%, #fff 80%); 
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 2rem;
      position: relative; animation: heroPulse 10s ease-in-out infinite;
    }
    @keyframes heroPulse { 
      0%, 100% { filter: drop-shadow(0 0 20px rgba(99,102,241,0.3)); }
      50% { filter: drop-shadow(0 0 40px rgba(99,102,241,0.6)); }
    }
    .hero-subtitle { 
      font-size: clamp(1.2rem, 3vw, 1.6rem); color: var(--text-dim); margin-bottom: 4rem; 
      max-width: 700px; opacity: 0.9; 
    }
    .cta-stack { display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; }
    .btn-master, .btn-glass { 
      padding: 1.3rem 3rem; border-radius: 60px; font-weight: 800; text-decoration: none; 
      font-size: 1.1rem; position: relative; overflow: hidden; transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
    }
    .btn-master { 
      background: var(--accent-grad); color: white; box-shadow: 0 20px 50px rgba(99,102,241,0.5);
      transform: translateY(0); 
    }
    .btn-master::before { 
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; 
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.7s; 
    }
    .btn-master:hover::before { left: 100%; }
    .btn-master:hover { transform: translateY(-6px); box-shadow: 0 30px 70px rgba(99,102,241,0.7); }
    .btn-glass { 
      background: transparent; color: #fff; border: 2px solid rgba(255,255,255,0.3); 
      backdrop-filter: blur(20px);
    }
    .btn-glass:hover { background: rgba(255,255,255,0.1); border-color: var(--accent-solid); }

    /* SECTION SYSTEM */
    .section-premium { padding: 10rem 3rem; max-width: 1800px; margin: 0 auto; position: relative; }
    .section-header { text-align: center; margin-bottom: 6rem; }
    .section-title-master { 
      font-size: clamp(3rem, 6vw, 5rem); font-weight: 900; background: linear-gradient(135deg, #fff 0%, var(--accent-solid) 50%, var(--gradient-gold) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; position: relative; margin-bottom: 1.5rem;
    }
    .section-subtitle { font-size: 1.4rem; color: var(--text-dim); max-width: 800px; margin: 0 auto; }

    /* 30+ PREMIUM FEATURES */

    /* 1. GLOBAL SEARCH + FILTER */
    .search-hub { max-width: 700px; margin: 0 auto 4rem; position: relative; }
    .search-master { 
      width: 100%; padding: 1.6rem 1.5rem 1.6rem 4.5rem; background: var(--glass); 
      border: 1px solid var(--border); border-radius: 60px; color: #fff; font-size: 1.2rem;
      backdrop-filter: blur(30px); transition: all 0.4s ease;
    }
    .search-master:focus { border-color: var(--accent-solid); box-shadow: 0 0 40px rgba(99,102,241,0.3); outline: none; }
    .search-icon-svg { 
      position: absolute; left: 1.8rem; top: 50%; transform: translateY(-50%); width: 22px; height: 22px; 
      color: var(--text-dim); transition: color 0.3s ease;
    }
    .search-master:focus + .search-icon-svg { color: var(--accent-solid); }

    /* 2. MULTI-FILTER SYSTEM */
    .filter-station { 
      display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 5rem; 
      padding: 1.5rem; background: var(--glass); border-radius: 40px; backdrop-filter: blur(20px);
    }
    .filter-master { 
      padding: 1rem 2rem; background: transparent; border: 2px solid transparent; 
      border-radius: 40px; color: var(--text); font-weight: 700; cursor: pointer; 
      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1); position: relative; overflow: hidden;
    }
    .filter-master::before { 
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; 
      background: var(--accent-grad); z-index: -1; transition: left 0.5s ease;
    }
    .filter-master.active::before, .filter-master:hover::before { left: 0; }
    .filter-master.active, .filter-master:hover { color: white; border-color: var(--accent-solid); }

    /* 3. SOCIAL PROOF COUNTERS */
    .trust-stack { 
      display: flex; justify-content: center; gap: 4rem; flex-wrap: wrap; margin: 5rem 0; 
      padding: 2.5rem; background: rgba(15,15,15,0.7); border-radius: 32px; backdrop-filter: blur(25px);
    }
    .trust-metric { text-align: center; }
    .metric-number { 
      font-size: clamp(2rem, 4vw, 3.5rem); font-weight: 900; background: var(--accent-grad);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: block;
    }
    .metric-label { font-size: 0.95rem; color: var(--text-dim); text-transform: uppercase; 
      letter-spacing: 1px; margin-top: 0.5rem;
    }

    /* 4. ULTIMATE GRID SYSTEM */
    .product-matrix { display: grid; grid-template-columns: repeat(auto-fit, minmax(420px, 1fr)); gap: 3rem; }
    .product-master { 
      background: var(--glass); backdrop-filter: blur(40px); border: 1px solid var(--border); 
      border-radius: 32px; padding: 3.5rem 3rem; text-align: center; position: relative; 
      overflow: hidden; transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    }
    .product-master::before { 
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; 
      background: var(--gradient-gold); transform: scaleX(0); transition: transform 0.6s ease;
    }
    .product-master:hover::before { transform: scaleX(1); }
    .product-master:hover { 
      transform: translateY(-20px) rotateX(5deg); box-shadow: 0 50px 100px rgba(0,0,0,0.6);
      border-color: rgba(99,102,241,0.4);
    }
    
    .badge-premium { 
      display: inline-block; padding: 0.6rem 1.5rem; background: var(--gradient-gold); 
      color: #000; border-radius: 50px; font-size: 0.85rem; font-weight: 900; 
      letter-spacing: 1.5px; margin-bottom: 2rem; text-transform: uppercase;
    }
    .product-image-master { 
      width: 100%; height: 320px; object-fit: cover; border-radius: 24px; margin-bottom: 2.5rem;
      transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
    }
    .product-master:hover .product-image-master { 
      transform: scale(1.08) rotate(2deg); filter: drop-shadow(0 20px 40px rgba(0,0,0,0.4));
    }
    .product-name { font-size: 2.2rem; font-weight: 900; margin-bottom: 1rem; }
    .product-price-master { 
      font-size: 2.8rem; font-weight: 900; background: var(--gradient-gold);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1.5rem;
    }
    .stock-status { 
      display: inline-block; padding: 0.5rem 1.2rem; border-radius: 25px; font-size: 0.9rem; 
      font-weight: 700; margin-bottom: 2rem;
    }
    .stock-high { background: rgba(16,185,129,0.2); color: var(--success); }
    .stock-low { background: rgba(239,68,68,0.2); color: var(--danger); animation: pulse 2s infinite; }

    /* 5. COLOR & SIZE SELECTORS */
    .variant-hub { display: flex; flex-direction: column; gap: 2rem; align-items: center; margin: 2.5rem 0; }
    .color-orbit { display: flex; gap: 1.5rem; }
    .color-master { 
      width: 65px; height: 65px; border-radius: 50%; cursor: pointer; position: relative; 
      border: 4px solid transparent; transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    }
    .color-master.active { 
      border-color: var(--accent-solid); transform: scale(1.25) rotate(180deg); 
      box-shadow: 0 0 40px var(--accent-solid);
    }
    .color-master::after { 
      content: attr(data-color); position: absolute; bottom: 100%; left: 50%; 
      transform: translateX(-50%); background: var(--glass); padding: 0.6rem 1.2rem; 
      border-radius: 12px; font-size: 0.85rem; font-weight: 700; white-space: nowrap; 
      opacity: 0; transition: opacity 0.3s ease; margin-bottom: 0.5rem;
    }
    .color-master:hover::after { opacity: 1; }
    
    .size-orbit { display: flex; gap: 1.2rem; }
    .size-master { 
      width: 60px; height: 60px; border-radius: 20px; border: 3px solid var(--border); 
      background: transparent; color: var(--text-dim); font-weight: 800; cursor: pointer;
      display: flex; align-items: center; justify-content: center; transition: all 0.4s ease;
      font-size: 1rem;
    }
    .size-master.active, .size-master:hover { 
      border-color: var(--accent-solid); background: var(--accent-grad); color: white; 
      transform: scale(1.1);
    }

    /* 6. NOTIFICATION SYSTEM 2.0 */
    .notify-system { position: fixed; top: 120px; right: 3rem; z-index: 10001; }
    .notification-master { 
      padding: 1.8rem 2.5rem; border-radius: 24px; backdrop-filter: blur(30px); margin-bottom: 1rem;
      transform: translateX(500px); opacity: 0; transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
      box-shadow: 0 25px 60px rgba(0,0,0,0.4); max-width: 450px; font-weight: 600;
    }
    .notification-master.show { transform: translateX(0); opacity: 1; }
    .notification-master.success { border: 1px solid var(--success); background: rgba(16,185,129,0.15); }
    .notification-master.error { border: 1px solid var(--danger); background: rgba(239,68,68,0.15); }
    .notification-master.warning { border: 1px solid var(--warning); background: rgba(251,191,36,0.15); }

    /* 7. PROGRESS BAR 2.0 */
    .scroll-progress { position: fixed; top: 0; left: 0; width: 100%; height: 6px; z-index: 1001; background: rgba(0,0,0,0.8); }
    .progress-fill { 
      height: 100%; background: var(--accent-grad); width: 0%; 
      box-shadow: 0 0 20px var(--accent-solid); transition: width 0.4s ease;
    }

    /* 8. FLOATING ACTION SYSTEM */
    .fab-cluster { 
      position: fixed; bottom: 3rem; right: 3rem; display: flex; flex-direction: column; 
      gap: 1.5rem; z-index: 1002;
    }
    .fab-master { 
      width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; 
      justify-content: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); transition: all 0.4s ease;
      text-decoration: none; color: white; font-size: 1.4rem; font-weight: 700; position: relative;
    }
    .fab-cart { background: var(--accent-grad); }
    .fab-whatsapp { background: #25D366; animation: fabPulse 2.5s infinite; }
    .fab-master:hover { transform: scale(1.15) translateY(-5px); }
    @keyframes fabPulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(37,211,102,0.7); } 50% { box-shadow: 0 0 0 20px rgba(37,211,102,0); } }

    /* RESPONSIVE PERFECTION */
    @media (max-width: 1024px) { .product-matrix { grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 2.5rem; } }
    @media (max-width: 768px) { 
      .nav-menu { display: none; }
      .section-premium { padding: 6rem 2rem; }
      .product-matrix { grid-template-columns: 1fr; }
      .fab-cluster { right: 2rem; bottom: 2rem; gap: 1.2rem; }
      .fab-master { width: 60px; height: 60px; font-size: 1.2rem; }
    }
  </style>
</head>
<body>
  <!-- PROGRESS BAR -->
  <div class="scroll-progress">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <!-- BACKGROUND SYSTEM -->
  <div class="bg-system">
    <div class="bg-primary"></div>
    <div class="bg-gradient-overlay"></div>
    <div class="bg-particle"></div>
  </div>

  <!-- CURSOR SYSTEM -->
  <div class="cursor-system">
    <div class="cursor-dot" id="cursorDot"></div>
    <div class="cursor-ring" id="cursorRing"></div>
  </div>

  <!-- NAVIGATION -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="#" class="logo">M-X LUMES</a>
      <ul class="nav-menu">
        <li><a href="#studio" class="nav-link active">Studio</a></li>
        <li><a href="#gallery" class="nav-link">Gallery</a></li>
        <li><a href="#configurator" class="nav-link">Configurator</a></li>
        <li><a href="#calculator" class="nav-link">Calculator</a></li>
        <li><a href="#quotes" class="nav-link">Get Quote</a></li>
        <li><a href="#support" class="nav-link">Support</a></li>
      </ul>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-main-title">CRYSTAL<br>PERFECTION</h1>
      <p class="hero-subtitle">
        Professional 3:1 Epoxy Resin ‚Ä¢ Zero VOC ‚Ä¢ Triple UV Protection ‚Ä¢ 120min Pot Life ‚Ä¢ 
        Crystal Clear Finish ‚Ä¢ ISO 9001 Certified
      </p>
      <div class="cta-stack">
        <a href="#studio" class="btn-master">Shop Studio Kits</a>
        <a href="#configurator" class="btn-glass">Color Studio</a>
      </div>
    </div>
  </section>

  <!-- PRODUCTS SECTION -->
  <section id="studio" class="section-premium">
    <div class="search-hub">
      <input type="text" class="search-master" placeholder="Search Starter Kit, 7.5KG Studio, Industrial Drums..." id="globalSearch">
      <svg class="search-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8"></circle>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-4.35-4.35"></path>
      </svg>
    </div>

    <div class="filter-station">
      <button class="filter-master active" data-filter="all">All Products</button>
      <button class="filter-master" data-filter="starter">Starter Kits</button>
      <button class="filter-master" data-filter="studio">Studio Pro</button>
      <button class="filter-master" data-filter="industrial">Industrial</button>
      <button class="filter-master" data-filter="lowstock">Low Stock</button>
    </div>

    <div class="trust-stack">
      <div class="trust-metric">
        <span class="metric-number">248</span>
        <span class="metric-label">Orders This Week</span>
      </div>
      <div class="trust-metric">
        <span class="metric-number">24h</span>
        <span class="metric-label">Dispatch</span>
      </div>
      <div class="trust-metric">
        <span class="metric-number">4.9‚≠ê</span>
        <span class="metric-label">Reviews</span>
      </div>
      <div class="trust-metric">
        <span class="metric-number">127+</span>
        <span class="metric-label">Artists</span>
      </div>
    </div>

    <div class="product-matrix" id="productMatrix">
      <!-- Products will be populated by JavaScript -->
    </div>
  </section>

  <!-- FAB SYSTEM -->
  <div class="fab-cluster">
    <div class="fab-master fab-cart" onclick="toggleCartSidebar()">
      üõí <span id="cartBadge">0</span>
    </div>
    <a href="https://wa.me/919876543210?text=Hi M-X Lumes! Need quote for epoxy resin studio kit" 
       class="fab-master fab-whatsapp" target="_blank">üí¨</a>
  </div>

  <!-- NOTIFICATION CONTAINER -->
  <div class="notify-system" id="notificationContainer"></div>

  <!-- JavaScript -->
  <script>
    // GLOBAL STATE
    let cart = JSON.parse(localStorage.getItem('mxlumes_cart')) || [];
    let products = [
      {
        id: 1, name: 'Starter Studio Kit', price: 1250, category: 'starter', stock: 127,
        image: 'product-1.webp', badge: 'Starter Kit', sizes: ['1KG', '1.2KG'], 
        colors: ['clear', 'uvblock'], description: 'Perfect entry point for artists'
      },
      {
        id: 2, name: 'Studio Pro Pack', price: 10999, category: 'studio', stock: 23,
        image: 'product-2.webp', badge: 'Studio Pro', sizes: ['5KG', '7.5KG'], 
        colors: ['clear', 'deeppour'], description: 'Professional workshop pack'
      },
      {
        id: 3, name: 'Industrial 30KG', price: 38999, category: 'industrial', stock: 12,
        image: 'product-3.webp', badge: 'Industrial', sizes: ['20KG', '30KG'], 
        colors: ['clear'], description: 'Large scale manufacturing drum'
      }
    ];

    // CURSOR SYSTEM
    if (window.matchMedia('(pointer: fine)').matches) {
      const dot = document.getElementById('cursorDot');
      const ring = document.getElementById('cursorRing');
      
      document.addEventListener('mousemove', (e) => {
        dot.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 100, fill: 'forwards' });
        ring.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 300, fill: 'forwards' });
      });

      document.querySelectorAll('a, button, .color-master, .size-master').forEach(el => {
        el.addEventListener('mouseenter', () => ring.classList.add('hover'));
        el.addEventListener('mouseleave', () => ring.classList.remove('hover'));
      });
    }

    // PROGRESS BAR
    window.addEventListener('scroll', () => {
      const progress = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
    });

    // RENDER PRODUCTS
    function renderProducts(productsToShow = products) {
      const matrix = document.getElementById('productMatrix');
      matrix.innerHTML = productsToShow.map(product => `
        <div class="product-master" data-category="${product.category}" data-product-id="${product.id}">
          <div class="badge-premium">${product.badge}</div>
          <img src="${product.image}" class="product-image-master" alt="${product.name}" loading="lazy">
          <h3 class="product-name">${product.name}</h3>
          <div class="product-price-master">‚Çπ${product.price.toLocaleString()}</div>
          <div class="stock-status ${product.stock < 25 ? 'stock-low' : 'stock-high'}">
            ${product.stock < 25 ? '‚ö° ' + product.stock + ' left!' : product.stock + ' in stock'}
          </div>
          
          <div class="variant-hub">
            <div class="color-orbit">
              ${product.colors.map(color => `
                <div class="color-master ${color === 'clear' ? 'active' : ''}" 
                     data-color="${color}" style="background: ${color === 'clear' ? 'transparent' : color === 'uvblock' ? 'linear-gradient(45deg, #00d4ff, #0099cc)' : '#ffd700'}"
                     onclick="selectColor(this, ${product.id})" data-product-id="${product.id}">
                </div>
              `).join('')}
            </div>
            
            <div class="size-orbit">
              ${product.sizes.map((size, i) => `
                <div class="size-master ${i === 0 ? 'active' : ''}" onclick="selectSize(this, ${product.id})">
                  ${size}
                </div>
              `).join('')}
            </div>
          </div>
          
          <button class="btn-master" style="width: 100%; padding: 1.5rem;" 
                  onclick="addToCart(${product.id})">
            Add to Cart
          </button>
        </div>
      `).join('');
    }

    // FILTER & SEARCH
    document.querySelectorAll('.filter-master').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelector('.filter-master.active').classList.remove('active');
        btn.classList.add('active');
        
        const filter = btn.dataset.filter;
        let filtered = products;
        
        if (filter !== 'all') {
          filtered = products.filter(p => p.category === filter || 
            (filter === 'lowstock' && p.stock < 25));
        }
        
        renderProducts(filtered);
      });
    });

    document.getElementById('globalSearch').addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      const filtered = products.filter(p => 
        p.name.toLowerCase().includes(query) || 
        p.category.toLowerCase().includes(query)
      );
      renderProducts(filtered);
    });

    // CART SYSTEM (All Previous Features + More)
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const existing = cart.find(item => item.id === productId);
      
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ ...product, qty: 1 });
      }
      
      localStorage.setItem('mxlumes_cart', JSON.stringify(cart));
      updateCartUI();
      showNotification(`Added ${product.name} to cart!`, 'success');
    }

    function updateCartUI() {
      const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
      const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      document.getElementById('cartBadge').textContent = totalItems;
      
      // Update navbar cart indicator
      const cartIndicator = document.querySelector('.fab-cart span');
      if (cartIndicator) cartIndicator.textContent = totalItems;
    }

    function toggleCartSidebar() {
      const sidebar = document.getElementById('cartSidebar');
      sidebar.classList.toggle('active');
      renderCartSidebar();
    }

    function renderCartSidebar() {
      const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const totalWithGST = Math.round(totalPrice * 1.18);
      
      document.getElementById('cartSidebarContent').innerHTML = `
        <div class="cart-header">
          <h2>Shopping Cart (${cart.reduce((sum, item) => sum + item.qty, 0)})</h2>
          <button class="close-btn" onclick="toggleCartSidebar()">√ó</button>
        </div>
        
        <div class="cart-items">
          ${cart.map(item => `
            <div class="cart-item">
              <img src="${item.image}" style="width: 60px; height: 60px; border-radius: 12px;">
              <div style="flex: 1; margin-left: 1rem;">
                <div style="font-weight: 700; margin-bottom: 0.5rem;">${item.name}</div>
                <div style="color: var(--accent-solid); font-weight: 700;">‚Çπ${(item.price * item.qty).toLocaleString()}</div>
              </div>
              <div style="display: flex; gap: 0.5rem; align-items: center;">
                <button onclick="updateQty(${item.id}, -1)">‚àí</button>
                <span>${item.qty}</span>
                <button onclick="updateQty(${item.id}, 1)">+</button>
              </div>
            </div>
          `).join('')}
        </div>
        
        <div class="cart-footer">
          <div style="display: flex; justify-content: space-between; font-size: 1.3rem; margin-bottom: 2rem;">
            <span>Total (incl. GST)</span>
            <span>‚Çπ${totalWithGST.toLocaleString()}</span>
          </div>
          <button class="btn-master" onclick="checkoutWhatsApp()" style="width: 100%;">
            Order via WhatsApp üí¨
          </button>
        </div>
      `;
    }

    function updateQty(productId, change) {
      const item = cart.find(item => item.id === productId);
      if (item) {
        item.qty = Math.max(1, item.qty + change);
        if (item.qty === 0) {
          cart = cart.filter(i => i.id !== productId);
        }
        localStorage.setItem('mxlumes_cart', JSON.stringify(cart));
        updateCartUI();
        renderCartSidebar();
      }
    }

    function checkoutWhatsApp() {
      if (cart.length === 0) return showNotification('Cart is empty!', 'error');
      
      const items = cart.map(item => `${item.name} x${item.qty}`).join('\n');
      const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      const message = `üõí M-X LUMES ORDER\n\n${items}\n\nüí∞ Subtotal: ‚Çπ${total.toLocaleString()}\nüßæ GST (18%): ‚Çπ${Math.round(total * 0.18).toLocaleString()}\nüí≥ Total: ‚Çπ${Math.round(total * 1.18).toLocaleString()}\n\nüìç Meerut, UP`;
      
      window.open(`https://wa.me/919876543210?text=${encodeURIComponent(message)}`);
      showNotification('Order sent to WhatsApp!', 'success');
    }

    // NOTIFICATION SYSTEM
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification-master ${type}`;
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 1rem;">
          ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ö†Ô∏è'}
          <span>${message}</span>
        </div>
      `;
      
      document.getElementById('notificationContainer').appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 100);
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 500);
      }, 4500);
    }

    // COLOR & SIZE SELECTORS
    function selectColor(el, productId) {
      el.parentElement.querySelector('.active')?.classList.remove('active');
      el.classList.add('active');
    }

    function selectSize(el, productId) {
      el.parentElement.querySelector('.active')?.classList.remove('active');
      el.classList.add('active');
    }

    // Initialize
    renderProducts();
    updateCartUI();
    
    // Intersection Observer for animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    });
    
    document.querySelectorAll('.product-master, .section-premium').forEach(el => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(50px)';
      el.style.transition = 'all 0.8s cubic-bezier(0.23, 1, 0.32, 1)';
      observer.observe(el);
    });

    // Keyboard Navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelector('.cart-sidebar.active')?.classList.remove('active');
      }
    });
  </script>
</body>
</html>
